{"ast":null,"code":"/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\nvar util = require('util');\nfunction BufferPool(initialSize, growStrategy, shrinkStrategy) {\n  if (this instanceof BufferPool === false) {\n    throw new TypeError(\"Classes can't be function-called\");\n  }\n  if (typeof initialSize === 'function') {\n    shrinkStrategy = growStrategy;\n    growStrategy = initialSize;\n    initialSize = 0;\n  } else if (typeof initialSize === 'undefined') {\n    initialSize = 0;\n  }\n  this._growStrategy = (growStrategy || function (db, size) {\n    return db.used + size;\n  }).bind(null, this);\n  this._shrinkStrategy = (shrinkStrategy || function (db) {\n    return initialSize;\n  }).bind(null, this);\n  this._buffer = initialSize ? new Buffer(initialSize) : null;\n  this._offset = 0;\n  this._used = 0;\n  this._changeFactor = 0;\n  this.__defineGetter__('size', function () {\n    return this._buffer == null ? 0 : this._buffer.length;\n  });\n  this.__defineGetter__('used', function () {\n    return this._used;\n  });\n}\nBufferPool.prototype.get = function (length) {\n  if (this._buffer == null || this._offset + length > this._buffer.length) {\n    var newBuf = new Buffer(this._growStrategy(length));\n    this._buffer = newBuf;\n    this._offset = 0;\n  }\n  this._used += length;\n  var buf = this._buffer.slice(this._offset, this._offset + length);\n  this._offset += length;\n  return buf;\n};\nBufferPool.prototype.reset = function (forceNewBuffer) {\n  var len = this._shrinkStrategy();\n  if (len < this.size) this._changeFactor -= 1;\n  if (forceNewBuffer || this._changeFactor < -2) {\n    this._changeFactor = 0;\n    this._buffer = len ? new Buffer(len) : null;\n  }\n  this._offset = 0;\n  this._used = 0;\n};\nmodule.exports = BufferPool;","map":{"version":3,"names":["util","require","BufferPool","initialSize","growStrategy","shrinkStrategy","TypeError","_growStrategy","db","size","used","bind","_shrinkStrategy","_buffer","Buffer","_offset","_used","_changeFactor","__defineGetter__","length","prototype","get","newBuf","buf","slice","reset","forceNewBuffer","len","module","exports"],"sources":["C:/Users/walle/Documents/lummelundalogin/lummelundalogin/node_modules/engine.io/node_modules/ws/lib/BufferPool.js"],"sourcesContent":["/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\nvar util = require('util');\n\nfunction BufferPool(initialSize, growStrategy, shrinkStrategy) {\n  if (this instanceof BufferPool === false) {\n    throw new TypeError(\"Classes can't be function-called\");\n  }\n\n  if (typeof initialSize === 'function') {\n    shrinkStrategy = growStrategy;\n    growStrategy = initialSize;\n    initialSize = 0;\n  }\n  else if (typeof initialSize === 'undefined') {\n    initialSize = 0;\n  }\n  this._growStrategy = (growStrategy || function(db, size) {\n    return db.used + size;\n  }).bind(null, this);\n  this._shrinkStrategy = (shrinkStrategy || function(db) {\n    return initialSize;\n  }).bind(null, this);\n  this._buffer = initialSize ? new Buffer(initialSize) : null;\n  this._offset = 0;\n  this._used = 0;\n  this._changeFactor = 0;\n  this.__defineGetter__('size', function(){\n    return this._buffer == null ? 0 : this._buffer.length;\n  });\n  this.__defineGetter__('used', function(){\n    return this._used;\n  });\n}\n\nBufferPool.prototype.get = function(length) {\n  if (this._buffer == null || this._offset + length > this._buffer.length) {\n    var newBuf = new Buffer(this._growStrategy(length));\n    this._buffer = newBuf;\n    this._offset = 0;\n  }\n  this._used += length;\n  var buf = this._buffer.slice(this._offset, this._offset + length);\n  this._offset += length;\n  return buf;\n}\n\nBufferPool.prototype.reset = function(forceNewBuffer) {\n  var len = this._shrinkStrategy();\n  if (len < this.size) this._changeFactor -= 1;\n  if (forceNewBuffer || this._changeFactor < -2) {\n    this._changeFactor = 0;\n    this._buffer = len ? new Buffer(len) : null;\n  }\n  this._offset = 0;\n  this._used = 0;\n}\n\nmodule.exports = BufferPool;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}